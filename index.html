<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="manifest" href="manifest.json">
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
  }
</script>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calculadora</title>

<style>
  :root{
    --bg:#f2f4f7;
    --card:#ffffff;
    --text:#2c3e50;
    --label:#34495e;
    --input-border:#d1d1d1;
    --result-bg:#f8fafc;
  }

  body.dark{
    --bg:#1e1e1e;
    --card:#2a2a2a;
    --text:#f1f1f1;
    --label:#d0d0d0;
    --input-border:#555;
    --result-bg:#333;
  }

  /* ANIMACIÃ“N SUAVE */
  *{
    transition: all .25s ease;
  }

  body{
    font-family:Segoe UI,Arial,sans-serif;
    margin:0;
    background:var(--bg);
    display:flex;
    justify-content:center;
    padding:18px;
  }

  .app{width:100%;max-width:520px}

  .header{
    background:#2c3e50;
    color:#fff;
    padding:14px;
    border-radius:14px;
    text-align:center;
    font-weight:700;
    box-shadow:0 6px 18px rgba(0,0,0,0.12);
    margin-bottom:16px;
    position:relative;
  }

  /* SWITCH MODO OSCURO */
  .toggle-dark{
    position:absolute;
    right:12px;
    top:12px;
    cursor:pointer;
    font-size:14px;
    background:#0004;
    padding:6px 10px;
    border-radius:8px;
    color:white;
    user-select:none;
  }

  .card{
    background:var(--card);
    padding:18px;
    border-radius:14px;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
    margin-bottom:14px;
  }

  label{display:block;font-weight:600;color:var(--label);margin-bottom:6px}

  input{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:1.5px solid var(--input-border);
    font-size:16px;
    margin-bottom:12px;
    background:var(--bg);
    color:var(--text);
  }

  .price-controls{display:flex;gap:8px;margin-bottom:10px}

  .small-btn{
    padding:8px 12px;
    border-radius:10px;
    border:none;
    font-weight:700;
    cursor:pointer;
    background:#3b82f6;
    color:white;
    transition:transform .15s ease;
  }
  .small-btn:active{transform:scale(0.92)}

  .result-box{
    background:var(--result-bg);
    padding:14px;
    border-radius:12px;
    margin-top:8px;
    opacity:0;
    animation:fadeIn .5s forwards;
  }

  @keyframes fadeIn{
    to{opacity:1;}
  }

  .res{margin:8px 0;font-size:16px}
  .ganancia{font-size:20px;font-weight:800}

  .g-pos{color:#2ecc71}
  .g-neg{color:#e74c3c}

  .label-inline{font-size:13px;color:#7f8c8d;margin-bottom:6px}
</style>
</head>

<body>
  <div class="app">

    <div class="header">
      Calculadora
      <div class="toggle-dark" onclick="toggleDark()">ðŸŒ™</div>
    </div>

    <div class="card">
      <label>Peso del animal (kg)</label>
      <input id="peso" type="number" placeholder="Ej: 700" oninput="calcular()" />

      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <div style="flex:1;min-width:170px">
          <label>Precio de compra (â‚¡/kg)</label>
          <input id="precioCompra" type="number" value="0" oninput="calcular()" />
          <div class="price-controls">
            <button class="small-btn" onclick="ajustar('compra', 10)">+10</button>
            <button class="small-btn" onclick="ajustar('compra', -10)">-10</button>
          </div>
          <div class="label-inline">Se usa para calcular cuÃ¡nto pagaste</div>
        </div>

        <div style="flex:1;min-width:170px">
          <label>Precio canal / venta (â‚¡/kg)</label>
          <input id="precioCanal" type="number" value="0" oninput="calcular()" />
          <div class="price-controls">
            <button class="small-btn" onclick="ajustar('canal', 10)">+10</button>
            <button class="small-btn" onclick="ajustar('canal', -10)">-10</button>
          </div>
          <div class="label-inline">Se usa para calcular el valor del canal</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h3 style="margin:0 0 8px 0;text-align:center">Resultados</h3>
      <div class="result-box">
        <div class="res"><strong>Total pagado:</strong> â‚¡<span id="pagado">0</span></div>
        <div class="res"><strong>Peso canal (peso âˆ’ 250):</strong> <span id="pesoCanal">0</span> kg</div>
        <div class="res"><strong>Valor canal:</strong> â‚¡<span id="valorCanal">0</span></div>
        <div class="res ganancia" id="gananciaText"><strong>Ganancia:</strong> â‚¡<span id="ganancia">0</span></div>
      </div>
    </div>

  </div>

<script>
function calcular(){
  const peso = Number(document.getElementById('peso').value) || 0;
  const precioCompra = Number(document.getElementById('precioCompra').value) || 0;
  const precioCanal  = Number(document.getElementById('precioCanal').value) || 0;

  const pagado = peso * precioCompra;
  let pesoCanal = peso - 250;
  if (pesoCanal < 0) pesoCanal = 0;
  const valorCanal = pesoCanal * precioCanal;
  const ganancia = valorCanal - pagado;

  document.getElementById('pagado').textContent = pagado.toLocaleString('es-CR');
  document.getElementById('pesoCanal').textContent = pesoCanal;
  document.getElementById('valorCanal').textContent = valorCanal.toLocaleString('es-CR');

  const gananciaText = document.getElementById('gananciaText');

  // Estilo de ganancia o pÃ©rdida
  if (ganancia < 0) {
    gananciaText.classList.add('g-neg');
    gananciaText.classList.remove('g-pos');
    gananciaText.querySelector('strong').textContent = 'PÃ©rdida:';
    document.getElementById('ganancia').textContent = (-ganancia).toLocaleString('es-CR');

  } else {
    gananciaText.querySelector('strong').textContent = 'Ganancia:';
    document.getElementById('ganancia').textContent = ganancia.toLocaleString('es-CR');

    if (ganancia < 90000) {
      gananciaText.classList.add('g-neg');
      gananciaText.classList.remove('g-pos');
    } else {
      gananciaText.classList.add('g-pos');
      gananciaText.classList.remove('g-neg');
    }
  }
}

function ajustar(tipo, delta){
  if (tipo === 'compra'){
    let el = document.getElementById('precioCompra');
    let v = Number(el.value) || 0; v += delta; if (v<0) v=0; el.value = v;
  } else {
    let el = document.getElementById('precioCanal');
    let v = Number(el.value) || 0; v += delta; if (v<0) v=0; el.value = v;
  }
  calcular();
}

function toggleDark(){
  document.body.classList.toggle("dark");
}

// calcular al cargar
calcular();
</script>

</body>
</html>
